<!DOCTYPE html>
<html>
   <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>SporeDoor - High Quality Mushrooms</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="spore.css">
   
</head>
<body>
    <div class="modal 21check hidden">
        <div class="modal-box">
            <a class="nav-brand">
                <span>Spore</span>Door
            </a>
            Are you 21 or older?
            <div class="checkbtns21">
                <button onclick="remove21()"class="button is-primary">
                    Yes
                </button>
                <button class="button is-primary">
                    No
                </button>
            </div>
        </div>
    </div>
    <div class="cart-sidebar hidden">
        <button class="close-btn" onclick="closecart()">
            X
        </button>
        <div class="cart-item-list">



            
        </div>
        <p id="cartotal">
            Total: $0.00
        </p>
        <button onclick="gotoCheckout()" class="is-primary">
            Checkout
        </button>
    </div>
    <nav>
        <a href="/" class="nav-brand">
            <span>Spore</span>Door
        </a>
        <button class="navshop" onclick="opencart()">
            <svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="512" height="512" x="0" y="0" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve" class=""><g><path d="M310.449 226.569a289.626 289.626 0 0 0-36.12-2.958l-37.383-.693a288.551 288.551 0 0 0-36.608 1.649l-36.159 137.306a76.777 76.777 0 0 0-2.4 15.116l-1.842 31.937a70.36 70.36 0 0 0 .5 14.266A71.166 71.166 0 0 0 230.825 484h37.919a71.345 71.345 0 0 0 70.51-61.766c0-.023.006-.055.009-.078a71.083 71.083 0 0 0-.347-20.946Z" fill="#FFFFFF" opacity="1" data-original="#000000" class=""></path><path d="M398.907 94.969c-67.632-60.01-114.376-66.95-143.653-66.95-36.33 0-71.054 9.918-103.206 29.478-28.8 17.518-54.36 42.334-73.924 71.765-4.749 7.145-10.265 15.607-15.165 24.195a45.8 45.8 0 0 0-1.784 42.715c7.242 15.388 22.4 26.462 40.542 29.623l.045.008a61.585 61.585 0 0 0 23.942-.61l39.043-8.858a302.328 302.328 0 0 1 66.83-7.468q2.816 0 5.629.052l37.383.695a303.032 303.032 0 0 1 52.387 5.557l54.42 10.641a60.869 60.869 0 0 0 21.66.32l6.583-1.084c18.425-3.037 33.821-14.166 41.183-29.772a45.351 45.351 0 0 0-1.882-42.676c-10.806-18.617-26.705-36.931-50.033-57.631Z" fill="#FFFFFF" opacity="1" data-original="#000000" class=""></path></g></svg>
        Cart</button>
    </nav>


    
    <div class="checkoutsec">
        <section class="steptscheckout ">
            <div>
                <svg class="is-active" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="20" x="0" y="0" viewBox="0 0 24 24" style="enable-background:new 0 0 512 512" xml:space="preserve" class=""><g><path d="M12 0C7.038 0 3 4.066 3 9.065c0 7.103 8.154 14.437 8.501 14.745a.749.749 0 0 0 .998.001C12.846 23.502 21 16.168 21 9.065 21 4.066 16.962 0 12 0zm0 14c-2.757 0-5-2.243-5-5s2.243-5 5-5 5 2.243 5 5-2.243 5-5 5z" fill="#FFFFFF" opacity="1" data-original="#000000" class=""></path></g></svg>
            </div>
            ---
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="30" height="30" x="0" y="0" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve" class=""><g><path d="M512 163v-27c0-30.928-25.072-56-56-56H56c-30.928 0-56 25.072-56 56v27a5 5 0 0 0 5 5h502a5 5 0 0 0 5-5zM0 205v171c0 30.928 25.072 56 56 56h400c30.928 0 56-25.072 56-56V205a5 5 0 0 0-5-5H5a5 5 0 0 0-5 5zm128 131c0 8.836-7.164 16-16 16H96c-8.836 0-16-7.164-16-16v-16c0-8.836 7.164-16 16-16h16c8.836 0 16 7.164 16 16z" fill="#FFFFFF" opacity="1" data-original="#000000" class=""></path></g></svg>
            </div>
            ---
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="30" height="30" x="0" y="0" viewBox="0 0 520 520" style="enable-background:new 0 0 512 512" xml:space="preserve" class=""><g><path d="M79.423 240.755a47.529 47.529 0 0 0-36.737 77.522l120.73 147.894a43.136 43.136 0 0 0 36.066 16.009c14.654-.787 27.884-8.626 36.319-21.515L486.588 56.773a6.13 6.13 0 0 1 .128-.2c2.353-3.613 1.59-10.773-3.267-15.271a13.321 13.321 0 0 0-19.362 1.343q-.135.166-.278.327L210.887 328.736a10.961 10.961 0 0 1-15.585.843l-83.94-76.386a47.319 47.319 0 0 0-31.939-12.438z" data-name="7-Check" fill="#FFFFFF" opacity="1" data-original="#000000" class=""></path></g></svg>
            </div>
        </section>
        <section class="checkout_shipping">
            Enter your shipping address.
            
            <input placeholder="Address"/>
            <input placeholder="Address 2"/>
            <input placeholder="City"/>
            <input placeholder="Zip Code"/>

            <button onclick="submitShip()"class="is-primary">Next</button>
        </section>
        <section class="checkout_pm hidden">
            Enter your credit card
            
            <input placeholder="16 Digit"/>
            <div class="cpminline">
                <input placeholder="Expiration"/>
            <input placeholder="CVV"/>
            </div>
            <input placeholder="Zip Code"/>

            <button onclick="submitPM()"class="is-primary">Next</button>
        </section>

        <section class="checkout_summary hidden">
            
                <button onclick="showship()" class="is-primary hidden">Add Shipping Address</button>
                <div>
                    <p>SubTotal:</p>
                    <p>$0</p>
                </div>
                <div>
                    <p>Taxes:</p>
                    <p>$0</p>
                </div>
                <div>
                    <p>Shipping:</p>
                    <p>$0</p>
                </div>
                <a class="divider"></a>
                <div id="totalchc">
                    <p>Total:</p>
                    <p>$0</p>
                </div>
                <button onclick="showPM()"class="is-primary-out hidden">Add Payment Method</button>
                <button class="is-primary">Place Order</button>
             
        </section>
     
    </div>
    
    <script>
        
        function showship(){
            document.getElementsByClassName("checkout_summary")[0].classList.add("hidden")
            document.getElementsByClassName("checkout_shipping")[0].classList.remove("hidden")
        }
        function showPM(){
            document.getElementsByClassName("checkout_pm")[0].classList.remove("hidden")
            document.getElementsByClassName("checkout_summary")[0].classList.add("hidden")
        
        }
        function submitShip(){
            document.getElementsByClassName("checkout_pm")[0].classList.remove("hidden")
            document.getElementsByClassName("checkout_shipping")[0].classList.add("hidden")
        }
        function submitPM(){
            document.getElementsByClassName("checkout_summary")[0].classList.remove("hidden")
            document.getElementsByClassName("checkout_pm")[0].classList.add("hidden")
        }
    </script>

    <script>
        function gotoCheckout(){
            window.location.href = "checkout.html"
        }
        // Check if the item exists in localStorage
        if (!localStorage.getItem('cart')) {
        // If it doesn't exist, create and set the item in localStorage
        localStorage.setItem('cart', '[]');
        }
        function getCart(){
            return JSON.parse(localStorage.getItem('cart'))
        }
        function removeFromCart(){
            var cart = getCart();
            cart.push({
                id:1,
                price:100,
                quantity:1,
                name:'sdm',
                image:'.png'
            })
            cart = JSON.stringify(cart)
            
            localStorage.setItem('cart',cart)
            refreshCart()
        }
        function addToCart(id,price,quantity,name,image){
            var cart = getCart();
            cart.push({
                id:id,
                price:price,
                quantity:quantity,
                name:name,
                image:image
            })
            cart = JSON.stringify(cart)
            localStorage.setItem('cart',cart)
            refreshCart()
        }
        function addToCartt(){
            const name = document.querySelector("body > section > div > h1").innerHTML
            const price = document.querySelector("body > section > div > h2").innerHTML.replace(/\$/g, '');

            const image = document.querySelector("body > section > div > div:nth-child(1) > img").src
            
            const quantity = document.querySelector("body > section > div > div.item-quantity > div").innerHTML
            addToCart(1,price,quantity,name,image)
        }
            
        
        function removeFromCartById(idToRemove) {
            var cart = getCart();

            // Find the index of the item with the specified id
            var indexToRemove = -1;
            for (var i = 0; i < cart.length; i++) {
                if (cart[i].id === idToRemove) {
                    indexToRemove = i;
                    break;
                }
            }

            // Remove the item if found
            if (indexToRemove !== -1) {
                cart.splice(indexToRemove, 1);
            }

            // Save the updated cart to localStorage
            cart = JSON.stringify(cart);
            localStorage.setItem('cart', cart);

            refreshCart();
        }


        function refreshCart(){
            const cartContainer = document.getElementsByClassName("cart-item-list")[0]
        // Now you can use the item from localStorage
        const yourItemValue = localStorage.getItem('cart');
       const caritems = JSON.parse(yourItemValue)
        cartContainer.innerHTML = ""
        var total = 0;
        caritems.forEach(item => {
            for (let i = 0; i < item.quantity; i++) {
                total+=parseFloat(item["price"]);
            }
            
            document.getElementById("cartotal").innerHTML = "Total: $"+total
            var htmlContent = '<div class="cart-item">' +
    '<div class="cart-item-top">' +
    '<img src="'+item["image"] +'">' +
    '<p class="cart-item-title">' +
    item["name"] +
    '</p>' +
    '</div>' +
    '<div class="cart-item-bottom">' +
    '<div class="cart-item-quantity">' +
    '<button onclick="subQuantity(this)" class="cart-item-quantity-minus">' +
    '-' +
    '</button>' +
    '<div class="cart-item-quantity-box">' +
        item["quantity"] +
    '</div>' +
    '<button onclick="addQuantity(this)" class="cart-item-quantity-plus">' +
    '+' +
    '</button>' +
    '</div>' +
    '<p class="cart-item-price">' +
    '$' +item["price"]+
    '</p>' +
    '</div>' +
    '</div>';
            cartContainer.innerHTML += htmlContent;
        });
        }
       
        refreshCart()
    </script>
    <script>
        var carttotal = 0;
        var cart = document.getElementsByClassName("cart-sidebar")[0]
        var closecartbtn = document.getElementsByClassName("close-btn")[0]
        function closecart(){
            cart.classList.add("hidden");
        }
        function opencart(btn){
            cart.classList.remove("hidden");
        }
        function addQuantity(btn){
            var quantity = btn.parentElement.querySelector("div");
            var quantitycount = parseInt(quantity.innerHTML)

            quantitycount = quantitycount+1
            quantity.innerHTML = quantitycount
        }
        function subQuantity(btn){
            var quantity = btn.parentElement.querySelector("div");
            var quantitycount = parseInt(quantity.innerHTML)

            quantitycount = quantitycount-1
            quantity.innerHTML = quantitycount
        }
        </script>
</body>
</html>